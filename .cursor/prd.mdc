## 제품 개요

- **제품명**: Mermaid Graph Tool (가칭)
- **타겟 플랫폼**: 데스크톱(Electron 기반, Windows/macOS/Linux)
- **핵심 가치 제안**: 개발자와 기획자가 Mermaid.js 다이어그램을 손쉽게 작성·검증·공유할 수 있는 WYSIWYG + 코드 혼합형 그래프 편집 도구 제공

## 문제 정의

- Mermaid.js를 활용할 때 실시간 미리보기와 코드 편집을 병행하기 어렵다.
- 복잡한 다이어그램 작성 시 유효성 검사, 히스토리 관리, 협업 메모 기능이 부족하다.
- 기존 Mermaid 에디터는 브라우저 기반이라 로컬 자원 접근, 오프라인 작업, 플러그인 확장이 제한적이다.

## 목표

- Mermaid.js 그래프를 실시간으로 렌더링하고, 코드/프롬프트 기반 편집을 모두 지원한다.
- 문법 오류 시에도 마지막으로 유효했던 그래프를 안정적으로 보여주며 오류 원인을 사용자에게 안내한다.
- 추후 확장 가능한 플러그인 구조와 템플릿 시스템을 마련한다.

## 비즈니스/제품 KPI

- 출시 후 3개월 내 주간 활성 사용자 500명 확보
- 템플릿/프롬프트 기반 그래프 생성 사용 비율 40% 이상
- 사용자 피드백 기준 편집 효율성 4.5/5 이상

## 주요 사용자 페르소나

1. **Frontend/Backend 개발자**
   - API 플로우, 시스템 아키텍처를 자주 시각화
   - 코드 기반 다이어그램 편집에 익숙
2. **프로덕트 기획자/PM**
   - 사용자 흐름, 상태 다이어그램, 의사결정 트리를 빠르게 공유 필요
   - 자연어 프롬프트로 그래프 초안을 얻고 싶어함
3. **기술 문서 작성자**
   - 문서 내 다이어그램을 일관된 스타일로 유지하고자 함
   - 버전 관리 및 내보내기 기능 중요

## 사용자 시나리오

- 코드 편집:
  1. 사용자는 상단 코드 패널에서 Mermaid 스크립트를 작성/수정한다.
  2. 문법 오류가 없으면 좌측 프리뷰가 즉시 갱신된다.
  3. 오류가 발생하면 마지막 성공 렌더링을 유지하고, 우측 하단에 오류 메시지를 표시한다.
- 프롬프트 기반 편집:
  1. 사용자가 하단 프롬프트 창에 요구사항을 자연어로 입력한다.
  2. 백엔드 AI 또는 규칙 엔진이 코드를 수정/생성해 상단 코드 패널에 반영한다.
  3. 사용자는 변경된 그래프를 확인 후 추가로 수정하거나 저장한다.
- 히스토리 & 템플릿:
  1. 사용자는 그래프 버전을 저장하고 이전 버전으로 롤백할 수 있다.
  2. 프로젝트 템플릿을 불러와 빠르게 다이어그램을 구성한다.

## 기능 요구사항

- Mermaid.js 렌더링 엔진을 내장하여 최신 문법 지원
- 코드 에디터: Syntax Highlight, 자동 완성, 오류 감지, 다중 탭
- 프리뷰 패널: 실시간 렌더링, 확대/축소, 이미지/PNG/SVG 내보내기
- 프롬프트 창: 히스토리, 시스템/사용자 메시지 구분, 회신 코드 삽입
- 상태 관리: 마지막 유효 렌더링 스냅샷 저장, 로컬 프로젝트/파일 관리
- 확장성: 플러그인(예: Jira, GitHub, Notion) 연계 구조

## 비기능 요구사항

- Electron 기반 크로스 플랫폼 지원
- 오프라인 모드 지원 (기본 기능)
- 프로젝트 자동 저장 및 파일 충돌 방지
- 1만 노드/에지 규모 그래프 렌더링 시에도 2초 내 프리뷰 갱신
- 텍스트 기반 검색/필터 기능 제공

## 의존성 및 통합 요구사항

- Mermaid.js 최신 버전
- 코드 에디터: Monaco Editor 또는 CodeMirror 6
- 프롬프트 처리: 로컬 LLM API 연동 또는 외부 OpenAI 호환 API
- 상태 관리 프레임워크: Electron + React (예정) 내 TanStack Query + Zustand 조합 검토

## 리스크 및 가정

- 로컬 LLM 지원 시 모델 용량 및 실행 성능 확보 필요
- Mermaid.js 대규모 그래프 렌더링 성능 이슈
- Electron 패키징 시 배포 파일 크기와 자동 업데이트 전략
- 협업 기능은 1차 릴리스 범위 밖 (향후 버전 고려)

## 성공 지표 측정 방안

- In-app 이벤트 로깅(그래프 작성, 프롬프트 사용, 내보내기)
- 사용자 온보딩 설문 및 NPS 조사
- 오류 리포팅/크래시 수집(Sentry 등)

## 출시 계획 개요

- Alpha: 내부 사용성 테스트, 기본 코드 편집 + 프리뷰
- Beta: 프롬프트 편집, 템플릿, 내보내기
- v1.0: 플러그인 SDK, 다국어, 자동 업데이트

## 구현 완료 기능 (2025-11)

### 핵심 기능
- ✅ 실시간 Mermaid 다이어그램 렌더링
- ✅ Monaco Editor 기반 코드 편집 (Syntax Highlight, 자동 포맷)
- ✅ 오류 발생 시 마지막 유효 그래프 유지
- ✅ 프로젝트 관리 시스템 (생성/삭제/저장/로드)
- ✅ 드래그 핸들러로 패널 크기 조정 (수평/수직)
- ✅ PNG 클립보드 복사 기능
- ✅ SVG/PNG 파일 내보내기

### 사용자 경험 개선
- ✅ 3패널 레이아웃 (Preview | Code Editor / Prompt)
- ✅ 실시간 프리뷰 업데이트
- ✅ 오류 메시지 표시 (Alert)
- ✅ 토스트 알림 시스템
- ✅ 반응형 패널 크기 조정

### 기술 구현
- ✅ Electron IPC 통신 (프로젝트 저장/로드, 파일 내보내기, 클립보드)
- ✅ Zustand 상태 관리
- ✅ Mermaid.js 렌더링 파이프라인
- ✅ Canvas 기반 SVG → PNG 변환


